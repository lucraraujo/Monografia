\chapter{Metodologia}\label{cap:metodologia}

Para comparar o desempenho do APACHE e do Nginx, foram realizados testes usando a ferramenta ApacheBench.\\
O ApacheBench é uma ferramenta para ser utilizada em linha de comando. Para invocar a ferramenta escreve-se o comando “ab” no terminal. A ferramenta aceita como parâmetros, entre outros, a quantidade de requisições que serão feitas e quantas requisições serão feitas de forma  simultânea, além URL da \'{a}gina que ser\'{a} requisitada. O comando de uma forma genérica fica assim:
\begin{verbatim}
ab -n numero_de_requisições -c requisições_simultâneas endereço_do_servidor
\end{verbatim}
Como visto, o parâmetro “-n” indica a quantidade total de requisições serão feitas no teste e o parâmetro “-c” indica a quantidade de requisições serão feitas de forma simultânea.\\
Para comparar os desempenhos dos dois servidores HTTP, foram realizados teste com quantidade de requisições entre 1.000 (mil) e 15.000 (quinze mil) pulando de mil em mil e com somente uma requisição concorrente e com 10\%, 20\%, 40\% e 80\% de concorrência de acordo com a quantidade de requisições. Esses números foram estimados tendo em vista a quantidade atual de usuário do SIGA e a quantidade de usuário que poderá ter no futuro.\\
Então para cada servidor HTTP, foram feitos 75 testes listados abaixo:
\begin{table}[htb]
	\centering
\ABNTEXfontereduzida
\caption[Requisições Totais e Requisições Concorrentes]{Requisições Totais e Requisições Concorrentes}
\label{tab:requisicoes}
\begin{tabular}{|>{\bfseries}c|c|c|c|c|c|}
\hline
\multirow{2}{*}{Requisições Totais} & \multicolumn{5}{c|}{\textbf{Requisições Concorrentes}} \\ \cline{2-6}
& 1    & 10\%      & 20\%  & 40\%  & 80\%  \\ \hline
1.000  & 1 & 100   & 200   & 400   & 800   \\ \hline
2.000  & 1 & 200   & 400   & 800   & 1600  \\ \hline
3.000  & 1 & 300   & 600   & 1.200 & 2400  \\ \hline
4.000  & 1 & 400   & 800   & 1.600 & 3200  \\ \hline
5.000  & 1 & 500   & 1.000 & 2.000 & 4000  \\ \hline
6.000  & 1 & 600   & 1.200 & 2.400 & 4800  \\ \hline
7.000  & 1 & 700   & 1.400 & 2.800 & 5600  \\ \hline
8.000  & 1 & 800   & 1.600 & 3.200 & 6400  \\ \hline
9.000  & 1 & 900   & 1.800 & 3.600 & 7200  \\ \hline
10.000 & 1 & 1.000 & 2.000 & 4.000 & 8000  \\ \hline
11.000 & 1 & 1.100 & 2.200 & 4.400 & 8800  \\ \hline
12.000 & 1 & 1.200 & 2.400 & 4.800 & 9600  \\ \hline
13.000 & 1 & 1.300 & 2.600 & 5.200 & 10400 \\ \hline
14.000 & 1 & 1.400 & 2.800 & 5.600 & 11200 \\ \hline
15.000 & 1 & 1.500 & 3.000 & 6.000 & 12000 \\ \hline
\end{tabular}
\legend{Quantidade de Requisições Totais e Requisições Concorrentes}
\end{table}
Para cada teste realizado os seguintes dados foram obtidos a partir da resposta do servidor HTTP para o ApacheBench:
\begin{itemize}
	\item Tempo total do teste em segundos (s);
	\item Total de dados transferido em bytes (b);
	\item Total de texto em HTML transferido em bytes (b);
	\item Número de requisições atendidas por segundo (N/s);
	\item Tempo médio por requisição em milissegundos (ms);
	\item Tempo médio por requisição entre as requisições concorrentes em milissegundos (ms);
	\item Taxa de transferência em Quilo Bytes por segundo (Kb/s);
	\item Porcentagem das requisições servidas em um período de tempo, tempo em milissegundos (X\%ms).
\end{itemize}
