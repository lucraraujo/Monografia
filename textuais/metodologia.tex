\chapter{Metodologia}\label{cap:metodologia}
A descrição da metodologia utilizada para a coleta e análise dos dados é de 
importante para o entendimento do estudos e dos resultados. A partir dos dados 
coletados é que será possível determinar se os objetivos foram alcançados.\\

\section{Coleta dos dados}
Para realizar a coleta de dados dos servidores foi utilizada o 
\textit{software} ApacheBench. O ApacheBench é uma ferramenta destinada a 
realizar testes de carga em servidores \textit{web} geralmente utilizada em 
linha de comando sendo invocada com o comando ``ab'' no terminal, aceitando 
como parâmetros, entre outros, a quantidade total de requisições que serão 
feitas, quantas requisições serão feitas de forma simultânea e a URL da página 
que será requisitada. O comando de uma forma genérica fica assim:
\begin{verbatim}
ab -n numero_de_requisições -c requisições_simultâneas endereço_do_servidor
\end{verbatim}
O parâmetro ``-n'' indica a quantidade total de requisições serão feitas no 
teste e o parâmetro, ``-c'' indica a quantidade de requisições serão feitas de 
forma simultânea. Ao fim da execução do teste, o ApacheBench retorna os os 
dados coletados e calculados.

\input{textuais/ambiente-de-testes}

\section{Definição dos valores utilizados nos testes}
De acordo com os últimos dados disponibilizados em Julho de 2014, a 
universidade contava, na época, com 9.118 utilizadores, entre alunos, 
professores e funcionários técnicos-administrativos. Baseando-se nesses dados, 
os valores utilizados nos testes foram estimados com cerca de 7.000 usuários 
ativos atualmente projetando mais que o dobro de usuário no futuro (15.000) e 
com cargas de acesso simultâneo de 10\%, 20\%, 40\% e 80\% para cada quantidade 
total de utilizadores. Os valores utilizados nos testes estão descritos na 
tabela \ref{tab:requisicoes}.
\begin{table}[htb]
	\centering
\ABNTEXfontereduzida
\caption[Requisições Totais e Requisições Concorrentes]{Requisições Totais e Requisições Concorrentes}
\label{tab:requisicoes}
\begin{tabular}{|>{\bfseries}c|c|c|c|c|}
\hline
\multirow{2}{*}{Requisições Totais} & \multicolumn{4}{c|}{\textbf{Requisições 
Concorrentes}} \\ \cline{2-5}
& 10\%      & 20\%  & 40\%  & 80\%  \\ \hline
1.000  & 100   & 200   & 400   & 800   \\ \hline
2.000  & 200   & 400   & 800   & 1.600  \\ \hline
3.000  & 300   & 600   & 1.200 & 2.400  \\ \hline
4.000  & 400   & 800   & 1.600 & 3.200  \\ \hline
5.000  & 500   & 1.000 & 2.000 & 4.000  \\ \hline
6.000  & 600   & 1.200 & 2.400 & 4.800  \\ \hline
7.000  & 700   & 1.400 & 2.800 & 5.600  \\ \hline
8.000  & 800   & 1.600 & 3.200 & 6.400  \\ \hline
9.000  & 900   & 1.800 & 3.600 & 7.200  \\ \hline
10.000 & 1.000 & 2.000 & 4.000 & 8.000  \\ \hline
11.000 & 1.100 & 2.200 & 4.400 & 8.800  \\ \hline
12.000 & 1.200 & 2.400 & 4.800 & 9.600  \\ \hline
13.000 & 1.300 & 2.600 & 5.200 & 10.400 \\ \hline
14.000 & 1.400 & 2.800 & 5.600 & 11.200 \\ \hline
15.000 & 1.500 & 3.000 & 6.000 & 12.000 \\ \hline
\end{tabular}
\legend{Quantidade de Requisições Totais e Requisições Concorrentes}
\end{table}
Para cada valor de requisições totais, foram testados quatro cenários de acesso 
simultâneo: 10, 20, 40, e 80 porcento, totalizando 60 testes. Os dados obtidos 
nos testes foram tabelados em uma planilha eletrônica com a ajuda do 
LibreOffice Calc e analisados a partir de gráficos e dos dados brutos.

\section{Métricas utilizadas}
As métricas utilizadas para comparar o desempenho dos servidores HTTP são as 
mesmas métricas calculadas e entregues pelo ApacheBench. São elas:
\begin{itemize}
	\item Tempo total do teste em segundos (s);
	\item Total de dados transferido em bytes (b);
	\item Total de texto em HTML transferido em bytes (b);
	\item Tempo médio por requisição em milissegundos (ms);
	\item Tempo médio de resposta por requisição entre as requisições 
	concorrentes em milissegundos (ms);
	\item Taxa de transferência em Quilo Bytes por segundo (Kb/s);
\end{itemize}
